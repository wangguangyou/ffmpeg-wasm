(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{390:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),o=a.n(r),l=(a(48),a(12)),i=a.n(l),u=a(28),s=a(15),m=a(40),p=a.n(m),f=a(29),v=a(395),b=a(392),d=a(394),E=a(41),h=a(396),w=a(32),j=function(e,t){var a=document.createElement("a");a.href=e,a.download=t||!0,a.click(),URL.revokeObjectURL(e)},g=(a(390),["mp3","acc","flac","ac-3","vorbis","opus"]),O=["mp4","flv","avi","mov","wmv","m4v","f4v","3gp","ts","webm"],k=[{value:-1,label:"\u9009\u62e9\u5176\u4ed6\u89c6\u9891"},{value:0,label:"\u683c\u5f0f\u8f6c\u6362"},{value:1,label:"\u63d0\u53d6\u97f3\u9891"}];var y=function(){var e=Object(n.useRef)(null),t=Object(v.a)().setToast,a=Object(n.useState)(!1),r=Object(s.a)(a,2),o=r[0],l=r[1],m=Object(n.useState)(),y=Object(s.a)(m,2),x=y[0],C=y[1],S=Object(n.useState)(O[0]),F=Object(s.a)(S,2),A=F[0],R=F[1],L=Object(n.useState)(g[0]),N=Object(s.a)(L,2),U=N[0],T=N[1],B=Object(n.useState)(!1),M=Object(s.a)(B,2),z=M[0],D=M[1],G=Object(n.useState)(!1),H=Object(s.a)(G,2),J=H[0],W=H[1],$=Object(n.useState)(!1),I=Object(s.a)($,2),P=I[0],q=I[1],K=function(e){return/^video\/(.+)$/.exec(e.type)[1]},Q=Object(f.createFFmpeg)({corePath:"./ffmpeg-core.js",log:!0}),V=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(!1),l(!0),setTimeout(Object(u.a)(i.a.mark((function e(){var t,a,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="test.".concat(K(x)),a="".concat(Date.now(),".").concat(A),e.next=4,Q.load();case 4:return e.t0=Q,e.t1=t,e.next=8,Object(f.fetchFile)(x);case 8:return e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),e.next=12,Q.run("-i",t,a);case 12:n=Q.FS("readFile",a),c=URL.createObjectURL(new Blob([n.buffer],{type:"video/".concat(A)})),j(c,a),l(!1);case 16:case"end":return e.stop()}}),e)}))),0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(e){var t=e.target.files;console.log(t[0]),C(t[0])};return c.a.createElement("div",{className:"App"},c.a.createElement(p.a,{loading:o,loaderColor:"rgba(0,112,243,.6)"}),c.a.createElement(b.a,{visible:J},c.a.createElement(b.a.Title,null,"\u683c\u5f0f\u8f6c\u6362"),c.a.createElement(b.a.Subtitle,null,"\u8bf7\u9009\u62e9\u8981\u8f6c\u6362\u7684\u89c6\u9891\u683c\u5f0f"),c.a.createElement(b.a.Content,null,c.a.createElement(d.a.Group,{value:A,onChange:function(e){return R(e)},useRow:!z},O.slice(0,z?O.length:4).map((function(e){return c.a.createElement(d.a,{key:e,value:e},e)})),!z&&c.a.createElement(E.a,{onClick:function(){return D(!0)},style:{marginLeft:"20px"},shadow:!0,iconRight:c.a.createElement(w.MoreHorizontal,null),auto:!0,scale:1/3}))),c.a.createElement(b.a.Action,{passive:!0,onClick:function(){return W(!1)}},"\u53d6\u6d88"),c.a.createElement(b.a.Action,{onClick:function(){return V()}},"\u786e\u8ba4")),c.a.createElement(b.a,{visible:P},c.a.createElement(b.a.Title,null,"\u63d0\u53d6\u97f3\u9891"),c.a.createElement(b.a.Subtitle,null,"\u8bf7\u9009\u62e9\u97f3\u9891\u683c\u5f0f"),c.a.createElement(b.a.Content,null,c.a.createElement(d.a.Group,{value:U,onChange:function(e){return T(e)},useRow:!z},g.slice(0,z?g.length:3).map((function(e){return c.a.createElement(d.a,{key:e,value:e},e)})),!z&&c.a.createElement(E.a,{onClick:function(){return D(!0)},style:{marginLeft:"20px"},shadow:!0,iconRight:c.a.createElement(w.MoreHorizontal,null),auto:!0,scale:1/3}))),c.a.createElement(b.a.Action,{passive:!0,onClick:function(){return q(!1)}},"\u53d6\u6d88"),c.a.createElement(b.a.Action,{onClick:function(){return q(!1),l(!0),void setTimeout(Object(u.a)(i.a.mark((function e(){var a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="test.".concat(K(x)),n="".concat(Date.now(),".").concat(U),e.next=4,Q.load();case 4:return e.t0=Q,e.t1=a,e.next=8,Object(f.fetchFile)(x);case 8:return e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),e.next=12,Q.run("-i",a,"-vn",n);case 12:try{c=Q.FS("readFile",n),console.log(c),r=URL.createObjectURL(new Blob([c.buffer],{type:"audio/".concat(A)})),j(r,n)}catch(o){t({text:"\u63d0\u53d6\u5931\u8d25,\u89c6\u9891\u53ef\u80fd\u6ca1\u6709\u97f3\u8f68"})}l(!1);case 14:case"end":return e.stop()}}),e)}))),0)}},"\u786e\u8ba4")),c.a.createElement("input",{ref:e,onChange:X,style:{display:"none"},accept:"video/*",type:"file",className:"App-main-upload"}),c.a.createElement("main",{className:"App-main"},x?c.a.createElement("div",{className:"App-main-content"},c.a.createElement(h.a,{caption:x.name,shadow:!0},c.a.createElement("div",{className:"App-main-actions"},k.map((function(t){return c.a.createElement(E.a,{key:t.value,className:"App-main-content-button",onClick:function(){return function(t){var a;return-1===t?null===(a=e.current)||void 0===a?void 0:a.click():0===t?W(!0):1===t?q(!0):void 0}(t.value)},shadow:!0,type:t.value<0?"abort":"secondary"},t.label)}))))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"App-main-info"},"\u70b9\u51fb\u4e0a\u4f20\u89c6\u9891"),c.a.createElement("input",{onChange:X,accept:"video/*",type:"file",className:"App-main-upload"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(393),C=a(397);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(x.a,null,c.a.createElement(C.a,null),c.a.createElement(y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,t,a){e.exports=a(391)},48:function(e,t,a){}},[[43,1,2]]]);
//# sourceMappingURL=main.41d9ad0e.chunk.js.map